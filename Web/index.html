<!DOCTYPE html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <meta charset="utf-8" />
    <title>Sean Search</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css">


</head>
<body>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- side용 -->
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-5666480866743556"
         data-ad-slot="3555176220"
         data-ad-format="auto"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

    <div class="container">

        <div class="text-center">
            <img src="sean_search_logo.png" alt="Sean Search Logo" />
        </div>

        <form class="form-group" id="target">
            <input type="text" class="form-control" id="userurl" placeholder="Search...">
            <input type="submit" class="form-control mt-2" id="submitButton">
            <div class="container" id="playerMatch"></div>
            <div id="pageresults"></div>
        </form>

    </div>


    <script type="text/javascript">

        $(document).ready(function () {

            $('#target').submit(function (e) {

                e.preventDefault();

                let searchTerm = "{search:'" + $('#userurl').val() + "'}";

                $.ajax({
                    type: "POST",
                    url: "Admin.asmx/GetResults",
                    data: searchTerm,
                    contentType: "application/json; charset=utf-16",
                    dataType: "json",
                    success: function (data) {
                        var myData = data.d;
                        // console.log(myData);
                        $("#pageresults").html(myData);
                    }
                })
            });

            $('#target').submit(function (e) {

                e.preventDefault();

                $.ajax({
                    type: "GET",
                    crossDomain: true,
                    contentType: "application/json; charset=utf-8",
                    url: "http://ec2-18-222-66-196.us-east-2.compute.amazonaws.com/index.php",
                    data: { name: $('#userurl').val() },
                    dataType: "jsonp",
                    success: function (data) {

                        let splitName = data["Name"].split(" ");
                        let firstName = splitName[0];
                        let lastName = splitName[1];
                        let image = "https://nba-players.herokuapp.com/players/" + lastName + "/" + firstName;

                        console.log(firstName);
                        console.log(lastName);



                        $("#playerMatch").html(

                            "Name: " + data["Name"] +
                            "<br/>" +
                            "<img src=" + image + ">" +
                            "<br/>" +
                            "Team: " + data["Team"] +
                            "<br/>" +
                            "Games Played: " + data["GP"] +
                            "<br/>" +
                            "Avg Minutes Played: " + data["Min"] +
                            "<br/>" +
                            "Missed FG: " + data["M-FG"] +
                            "<br/>" +
                            "Attempted FG: " + data["A-FG"] +
                            "<br/>" +
                            "% Made FG: " + data["Pct-FG"] +
                            "<br/>" +
                            "Missed 3PT: " + data["M-3PT"] +
                            "<br/>" +
                            "Attempted 3PT: " + data["A-3PT"] +
                            "<br/>" +
                            "% Made 3PT: " + data["Pct-3PT"] +
                            "<br/>" +
                            "Missed FT: " + data["M-FT"] +
                            "<br/>" +
                            "Attempted FT: " + data["A-FT"] +
                            "<br/>" +
                            "% Made FT: " + data["Pct-FT"] +
                            "<br/>" +
                            "Offensive Rb: " + data["Off-Rb"] +
                            "<br/>" +
                            "Defensive Rb: " + data["Def-Rb"] +
                            "<br/>" +
                            "Total Avg Rb: " + data["Tot-Rb"] +
                            "<br/>" +
                            "Ast: " + data["Ast"] +
                            "<br/>" +
                            "TO: " + data["TO"] +
                            "<br/>" +
                            "Stl: " + data["Stl"] +
                            "<br/>" +
                            "Blk: " + data["Blk"] +
                            "<br/>" +
                            "PF: " + data["PF"] +
                            "<br/>" +
                            "PPG: " + data["PPG"]

                        );
                    },
                    error: function (data) {
                        // empty the HTML
                        $("#playerMatch").html(
                            ""
                        );
                    },

                })

            });

        })
    </script>

</body>
</html>
